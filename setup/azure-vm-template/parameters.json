{
  "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentParameters.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "location": {
      "value": "eastus"
    },
    "networkInterfaceName": {
      "value": "devsecops-cloud801"
    },
    "enableAcceleratedNetworking": {
      "value": true
    },
    "networkSecurityGroupName": {
      "value": "devsecops-cloud-nsg"
    },
    "networkSecurityGroupRules": {
      "value": [
        {
          "name": "allow-ssh-from-my-ip",
          "properties": {
            "priority": 100,
            "protocol": "TCP", // üîπ uniquement TCP pour SSH
            "access": "Allow",
            "direction": "Inbound",
            "sourceApplicationSecurityGroups": [],
            "destinationApplicationSecurityGroups": [],
            "sourceAddressPrefix": "91.170.98.133/32", // üîπ ton IP publique r√©elle
            "sourcePortRange": "*",
            "destinationAddressPrefix": "*",
            "destinationPortRange": "22"
          }
        }
        // ‚ö†Ô∏è La r√®gle "default-allow-ssh" a √©t√© supprim√©e pour s√©curiser la VM
      ]
    },
    "subnetName": {
      "value": "default"
    },
    "virtualNetworkName": {
      "value": "devsecops-cloud_group-vnet"
    },
    "addressPrefixes": {
      "value": [
        "10.0.0.0/16"
      ]
    },
    "subnets": {
      "value": [
        {
          "name": "default",
          "properties": {
            "addressPrefix": "10.0.0.0/24"
          }
        }
      ]
    },
    "publicIpAddressName": {
      "value": "devsecops-cloud-ip"
    },
    "publicIpAddressType": {
      "value": "Static" // üîπ IP publique fixe conserv√©e
    },
    "publicIpAddressSku": {
      "value": "Standard"
    },
    "virtualMachineName": {
      "value": "devsecops-cloud"
    },
    "virtualMachineComputerName": {
      "value": "devsecops-cloud"
    },
    "virtualMachineRG": {
      "value": "devsecops-cloud_group"
    },
    "osDiskType": {
      "value": "StandardSSD_LRS"
    },
    "dataDisks": {
      "value": [
        {
          "lun": 0,
          "createOption": "attach",
          "caching": "ReadOnly",
          "writeAcceleratorEnabled": false,
          "id": null,
          "name": "devsecops-cloud_DataDisk_0",
          "storageAccountType": null,
          "diskSizeGB": null,
          "diskEncryptionSet": null
        }
      ]
    },
    "dataDiskResources": {
      "value": [
        {
          "name": "devsecops-cloud_DataDisk_0",
          "sku": "StandardSSD_LRS",
          "properties": {
            "diskSizeGB": 512,
            "creationData": {
              "createOption": "empty"
            }
          }
        }
      ]
    },
    "virtualMachineSize": {
      "value": "Standard_D4s_v3"
    },
    "adminUsername": {
      "value": "devsecops"
    },
    "adminPassword": {
      "value": null // üîπ √† remplacer par un mot de passe fort ou utiliser une cl√© SSH
    }
  }
}
